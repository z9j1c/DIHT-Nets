## Подробно про NAT

NAT - Neetwork Address Translation. Позволяет на маршрутизаоре подменять исходящий ip адрес так, чтобы по другую сторону сети все пакеты имели ip маршрутизатора.

Самый продвинутый - 3 тип NAT.

#### 1 тип - статический
У роутера есть набор доступных глобальных ip адресов. Статически настраивается таблица соответствия внутренних и глобальных адресов. Потом  будет подменяться заголовок при пересылке пакетов. Нужно это для того, чтобы внутренняя сеть не была доступна извне.

+ Самый простой
+ На каждый новый узел нужно иметь отдельный ip адрес и каждый раз нужно настраивать

#### 2 тип -  динамический

Позволяет настроить  несколько ip адресов на роутере, с которых он будет ходить во "внешнюю" сеть (вообще, любую подсеть). При попытке переслать пакет наружу выбирается первый доступный глобальный адрес.

#### 3 тип - NAT Overload / PAT (Port Address Translation)

Часто используется в домашних сетях и сетях малых предприятий. Наружу смотрит всего один ip. В дело вступает 4 уровень OSI: на каждое tcp-соединение выбирается свой порт.
Но нельзя использовать все протоколы с этим типом NAT, потому что роутер должен залезать в пакет и переписывать там порт. TCP, UDP, ICMP (таблица соответствия по портам страится по уникальным id ICMP) доступны.

Надо помнить, что всем хостам внутренней подсети придётся делить ограниченный набор портов маршрутизатора. Наспамить TCP-сессиями не получится, думайте о загруженности сети!